<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Rendimiento y Métricas en HTML</title>
  
  
  
  <link rel="stylesheet" href="../assets/lecciones.css">
  <script src="../components/header.js" defer></script>
  <script src="../components/sidebar.js" defer></script>
  <script src="../components/footer.js" defer></script>
  <script src="../components/code-block.js" defer></script>
</head>
<body>
  <main-header></main-header>
  <div class="main-container">
    <side-bar></side-bar>
    <div class="content-wrapper">
      <main class="main-content" id="main-content">
        <h1 class="page-title">Rendimiento y Métricas en HTML</h1>
        <section >
          <h2 class="section-title">¿Qué es el DOM?</h2>
          <p>El <b>DOM</b> (Document Object Model) es la representación en memoria de la estructura de un documento HTML. El navegador lo construye a partir del HTML recibido y permite a JavaScript manipular la página.</p>
        </section>
        <section >
          <h2 class="section-title">¿Qué es el CSSOM?</h2>
          <p>El <b>CSSOM</b> (CSS Object Model) es la estructura en memoria que representa todas las reglas CSS aplicadas al documento. Se construye a partir de los archivos y etiquetas &lt;style&gt; y &lt;link rel="stylesheet"&gt;.</p>
        </section>
        <section >
          <h2 class="section-title">Fases del Renderizado</h2>
          <ol>
            <li><b>Parseo del HTML</b>: Se construye el DOM.</li>
            <li><b>Parseo del CSS</b>: Se construye el CSSOM.</li>
            <li><b>Render Tree</b>: Se combinan DOM y CSSOM para crear el árbol de renderizado.</li>
            <li><b>Layout (Reflow)</b>: Se calculan posiciones y tamaños de los elementos.</li>
            <li><b>Paint</b>: Se dibujan los píxeles en pantalla.</li>
            <li><b>Composite</b>: Se combinan capas (layers) y se muestra el resultado final.</li>
          </ol>
        </section>
        <section >
          <h2 class="section-title">¿Qué elementos fuerzan Reflow, Repaint y Paint?</h2>
          <ul>
            <li><b>Reflow (Layout):</b> Cambios que afectan el tamaño o posición de elementos (por ejemplo, cambiar el width, height, padding, añadir o quitar nodos).</li>
            <li><b>Repaint:</b> Cambios que solo afectan el estilo visual (color, background, visibility) pero no el layout.</li>
            <li><b>Paint:</b> El proceso de dibujar los píxeles tras un reflow o repaint.</li>
          </ul>
        </section>
        <section >
          <h2 class="section-title">Layers y Compositing</h2>
          <p>El navegador puede crear <b>layers</b> (capas) para ciertos elementos (por ejemplo, con <code>position: fixed</code>, <code>transform</code>, <code>will-change</code>). Las capas permiten optimizar animaciones y aislar cambios visuales, pero demasiadas pueden afectar el rendimiento.</p>
        </section>
        <section >
          <h2 class="section-title">Métricas de Rendimiento</h2>
          <ul>
            <li><b>LCP (Largest Contentful Paint):</b> Mide el tiempo hasta que el elemento más grande y visible se renderiza. Es clave para la percepción de carga.</li>
            <li><b>FCP (First Contentful Paint):</b> Tiempo hasta que se muestra el primer contenido.</li>
            <li><b>TTI (Time to Interactive):</b> Tiempo hasta que la página es completamente interactiva.</li>
            <li><b>CLS (Cumulative Layout Shift):</b> Mide los cambios inesperados de layout.</li>
            <li><b>FID (First Input Delay):</b> Tiempo de respuesta al primer input del usuario.</li>
          </ul>
        </section>
        <section >
          <h2 class="section-title">Carga de Estilos y Código Bloqueante</h2>
          <p>Los archivos <b>CSS</b> enlazados con <code>&lt;link rel="stylesheet"&gt;</code> son <b>bloqueantes</b> para el renderizado: el navegador espera a descargarlos y procesarlos antes de mostrar la página. Los <b>scripts</b> sin <code>defer</code> o <code>async</code> también bloquean el parseo del HTML.</p>
          <code-block language="html" title="CSS bloqueante" code='<link rel="stylesheet" href="styles.css">'></code-block>
          <code-block language="html" title="Script bloqueante" code='<script src="main.js"></script>'></code-block>
          <code-block language="html" title="Script no bloqueante" code='<script src="main.js" defer></script>'></code-block>
        </section>
        <section >
          <h2 class="section-title">Buenas Prácticas para el Rendimiento</h2>
          <ul>
            <li>Minimiza el uso de <b>reflows</b> forzados (evita leer y escribir layout en bucles).</li>
            <li>Usa <b>clases</b> en vez de estilos inline para cambios visuales.</li>
            <li>Optimiza imágenes y recursos.</li>
            <li>Evita demasiadas <b>layers</b> innecesarias.</li>
            <li>Utiliza <b>defer</b> y <b>async</b> en scripts cuando sea posible.</li>
            <li>Minimiza el CSS y JavaScript.</li>
            <li>Analiza métricas con herramientas como <b>Lighthouse</b> o <b>Web Vitals</b>.</li>
          </ul>
        </section>
      </main>
    </div>
  </div>
  <main-footer></main-footer>
</body>
</html>
